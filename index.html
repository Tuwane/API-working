
<html>
<head>
<meta charset="UTF-8">
<title>Contacts Book</title>
<link rel="stylesheet" href="style.css">
</head>
<div id="line2"><h1>Contact book</h1></div>
<div id="line1">
<body onload="fetchContacts()">
	 
<div id="table">Contacts loading....</div>
<button  id="refresh" type="button">Refresh</button>
<button  id="addContact" type="button">Add Contact</button>

<script src="config.js"></script>

<script>
document.getElementById("refresh").addEventListener('click',fetchContacts);
document.getElementById("addContact").addEventListener('click',addContact);
function fetchContacts()
{
fetch(rootPath + 'controller/get-contacts/')
.then(function(response){
	return response.json();
})
.then(function(data){

	displayOutput(data);
	//console.log(data);
})

}
function displayOutput(data)
{
	
	let output = "<table id=>";
		for(let a in data){
			output += `
			
			<tr onclick="editContact(${data[a].id})">
				<td><img src="${rootPath}controller/uploads/${data[a].avatar}"width="50"/></td>
				<td><h5>${data[a].firstname}</h5></td>
				<td><h5>${data[a].lastname}</h5></td>
					

			</tr>
			`;
		}
		output +="</table>";
			document.getElementById("table").innerHTML = output;
	
}
function addContact()
{
	window.open("add_contact.html","_self");
}
function editContact(id)
{
	window.open("edit-contact.html?id=" + id,"_self");
}

</script>
</div>
</body>
</html>